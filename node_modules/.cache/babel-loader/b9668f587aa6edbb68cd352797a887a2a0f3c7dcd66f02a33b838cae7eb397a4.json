{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Button}from'react-bootstrap';import\"./Timer.css\";import{useNavigate}from'react-router-dom';import{useGame}from'./GameContext';// Import useGame from GameContext\nimport{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const PlayerClock=_ref=>{let{player,timer,toggleTimer}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"player-clock\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[player.name,\"'s Time: \",new Date(timer.seconds*1000).toISOString().substr(11,8)]}),/*#__PURE__*/_jsx(Button,{variant:timer.isActive?'danger':'success',onClick:()=>toggleTimer(player.name),children:timer.isActive?'Pause':'Start'})]});};// Timer component to display all players' clocks\nfunction Timer(){const navigate=useNavigate();const{team}=useGame();// Use the useGame hook to get the team data\nconst[timers,setTimers]=useState(team.reduce((acc,player)=>{// Initialize timers with the team from context\nacc[player.name]={seconds:0,isActive:false};return acc;},{}));const toggleTimer=playerName=>{setTimers(prevTimers=>{const isActive=!prevTimers[playerName].isActive;const newTimers={...prevTimers,[playerName]:{...prevTimers[playerName],isActive}};return newTimers;});};useEffect(()=>{const activeTimers=Object.entries(timers).filter(_ref2=>{let[,timer]=_ref2;return timer.isActive;});if(activeTimers.length===0)return;const interval=setInterval(()=>{setTimers(prevTimers=>{const newTimers={...prevTimers};activeTimers.forEach(_ref3=>{let[playerName]=_ref3;newTimers[playerName].seconds+=1;});return newTimers;});},1000);return()=>clearInterval(interval);},[timers]);const endGame=()=>{const playerTimesForStorage={};Object.keys(timers).forEach(playerName=>{const timeString=new Date(timers[playerName].seconds*1000).toISOString().substr(11,8);playerTimesForStorage[playerName]=timeString;});localStorage.setItem('playerTimes',JSON.stringify(playerTimesForStorage));navigate('/endGame');};return/*#__PURE__*/_jsxs(\"div\",{className:\"timer\",children:[team.map(player=>/*#__PURE__*/ // Render player clocks based on the team from context\n_jsx(PlayerClock,{player:player,timer:timers[player.name],toggleTimer:toggleTimer},player.name)),/*#__PURE__*/_jsx(Button,{variant:\"warning\",onClick:endGame,className:\"mt-3\",children:\"End Game\"})]});}export default Timer;","map":{"version":3,"names":["React","useState","useEffect","Button","useNavigate","useGame","jsxs","_jsxs","jsx","_jsx","PlayerClock","_ref","player","timer","toggleTimer","className","children","name","Date","seconds","toISOString","substr","variant","isActive","onClick","Timer","navigate","team","timers","setTimers","reduce","acc","playerName","prevTimers","newTimers","activeTimers","Object","entries","filter","_ref2","length","interval","setInterval","forEach","_ref3","clearInterval","endGame","playerTimesForStorage","keys","timeString","localStorage","setItem","JSON","stringify","map"],"sources":["/Users/sarthimathuria/Desktop/IntraTrackerFinal/src/Timer.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Button } from 'react-bootstrap';\nimport \"./Timer.css\";\nimport { useNavigate } from 'react-router-dom';\nimport { useGame } from './GameContext'; // Import useGame from GameContext\n\nconst PlayerClock = ({ player, timer, toggleTimer }) => {\n  return (\n    <div className=\"player-clock\">\n      <h3>{player.name}'s Time: {new Date(timer.seconds * 1000).toISOString().substr(11, 8)}</h3>\n      <Button variant={timer.isActive ? 'danger' : 'success'} onClick={() => toggleTimer(player.name)}>\n        {timer.isActive ? 'Pause' : 'Start'}\n      </Button>\n    </div>\n  );\n };\n \n\n// Timer component to display all players' clocks\nfunction Timer() {\n  const navigate = useNavigate();\n  const { team } = useGame(); // Use the useGame hook to get the team data\n\n  const [timers, setTimers] = useState(\n    team.reduce((acc, player) => { // Initialize timers with the team from context\n      acc[player.name] = { seconds: 0, isActive: false };\n      return acc;\n    }, {})\n  );\n\n  const toggleTimer = (playerName) => {\n    setTimers(prevTimers => {\n      const isActive = !prevTimers[playerName].isActive;\n      const newTimers = {\n        ...prevTimers,\n        [playerName]: { ...prevTimers[playerName], isActive }\n      };\n      return newTimers;\n    });\n  };\n\n  useEffect(() => {\n    const activeTimers = Object.entries(timers).filter(([, timer]) => timer.isActive);\n    if (activeTimers.length === 0) return;\n\n    const interval = setInterval(() => {\n      setTimers(prevTimers => {\n        const newTimers = { ...prevTimers };\n        activeTimers.forEach(([playerName]) => {\n          newTimers[playerName].seconds += 1;\n        });\n        return newTimers;\n      });\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [timers]);\n\n  const endGame = () => {\n    const playerTimesForStorage = {};\n    Object.keys(timers).forEach((playerName) => {\n      const timeString = new Date(timers[playerName].seconds * 1000).toISOString().substr(11, 8);\n      playerTimesForStorage[playerName] = timeString;\n    });\n    localStorage.setItem('playerTimes', JSON.stringify(playerTimesForStorage));\n    navigate('/endGame');\n  };\n\n  return (\n    <div className=\"timer\">\n      {team.map(player => ( // Render player clocks based on the team from context\n        <PlayerClock key={player.name} player={player} timer={timers[player.name]} toggleTimer={toggleTimer} />\n      ))}\n      <Button variant=\"warning\" onClick={endGame} className=\"mt-3\">End Game</Button>\n    </div>\n  );\n}\n\nexport default Timer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}